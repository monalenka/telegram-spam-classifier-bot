# Настройка системы рассылки контента

## Быстрый старт

### 1. Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
ADMIN_IDS=123456789,987654321
```

Где:
- `TELEGRAM_BOT_TOKEN` - токен вашего бота от @BotFather
- `ADMIN_IDS` - ID пользователей-администраторов через запятую (узнать ID можно у @userinfobot)

### 2. Запуск бота

```bash
python bot/telegram_bot.py
```

### 3. Первое использование

#### Для администраторов:
1. Напишите боту `/start` в личные сообщения
2. Нажмите кнопку `/content_menu`
3. Добавьте контент командой `/add_content`
4. Запланируйте рассылку командой `/schedule_content`

#### Для пользователей:
1. Напишите боту `/start` в личные сообщения
2. Нажмите кнопку `/subscribe` для подписки на рассылку

## Команды

### Пользовательские команды:
- `/subscribe` - подписаться на рассылку
- `/unsubscribe` - отписаться от рассылки

### Админские команды:
- `/content_menu` - меню управления контентом
- `/add_content` - добавить контент (текст, фото, видео, аудио)
- `/schedule_content` - запланировать рассылку
- `/list_content` - список доступного контента
- `/list_schedules` - список активных расписаний
- `/stats` - статистика рассылки

## Формат планирования рассылки

При планировании рассылки используйте формат:
```
<content_id> <время> [ежедневно]
```

Примеры:
- `content_20231201_120000 14:30` - одноразовая рассылка в 14:30
- `content_20231201_120000 09:00 ежедневно` - ежедневная рассылка в 09:00

## Структура данных

Все данные сохраняются в папке `data/`:
- `subscribers.json` - база подписчиков
- `scheduled_content.json` - метаданные контента
- `schedule.json` - расписание рассылок
- `content/` - папка с файлами контента

## Особенности

- Бот автоматически проверяет расписание каждую минуту
- Одноразовые рассылки удаляются после отправки
- Ежедневные рассылки повторяются каждый день
- Пользователи, заблокировавшие бота, автоматически удаляются из подписчиков
- Поддерживаются все типы медиа: текст, фото, видео, аудио





